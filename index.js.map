{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45663713-dfa6ca74103c7ea350b6beef4';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nlet currentPage = 1;\nexport const perPage = 15;\n\nexport async function fetchImages(query) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  });\n\n  try {\n    const response = await axios.get(BASE_URL, { params: searchParams });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n\nexport function incrementPage() {\n  currentPage += 1;\n}\n\nexport function resetPage() {\n  currentPage = 1;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGalleryItems(data, gallery, lightbox) {\n  console.log(data);\n  data.hits.forEach(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      const element = document.createElement('li');\n      const image = document.createElement('img');\n      const infoList = document.createElement('ul');\n      const link = document.createElement('a');\n\n      element.classList.add('gallery-item');\n      image.classList.add('gallery-image');\n      infoList.classList.add('info-list');\n      link.classList.add('gallery-link');\n\n      image.src = webformatURL;\n      image.width = '360';\n      image.alt = tags;\n      link.href = largeImageURL;\n\n      const infoItems = [\n        { title: 'Likes', value: likes },\n        { title: 'Views', value: views },\n        { title: 'Comments', value: comments },\n        { title: 'Downloads', value: downloads },\n      ];\n      infoItems.forEach(({ title, value }) => {\n        const item = document.createElement('li');\n        const heading = document.createElement('h2');\n        const text = document.createElement('p');\n\n        item.classList.add('info-item');\n        heading.classList.add('info-title');\n        text.classList.add('info-text');\n\n        heading.textContent = `${title}`;\n        text.textContent = `${value}`;\n\n        item.appendChild(heading);\n        item.appendChild(text);\n        infoList.appendChild(item);\n      });\n\n      link.appendChild(image);\n      element.appendChild(link);\n      element.appendChild(infoList);\n      gallery.appendChild(element);\n    }\n  );\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('#gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      close: true,\n      loop: true,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function scrollByTwoCardHeights() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  fetchImages,\n  incrementPage,\n  resetPage,\n  perPage,\n} from './js/pixabay-api.js';\nimport {\n  renderGalleryItems,\n  scrollByTwoCardHeights,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('#search-query');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet lightbox;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n  loadBtn.style.display = 'none';\n  loader.classList.add('submit-loader');\n\n  const query = searchInput.value.trim();\n\n  resetPage();\n\n  try {\n    const data = await fetchImages(query);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching <br> your search query. Please try again!',\n        messageColor: '#fafafb',\n        messageLineHeight: '1.5px',\n        messageSize: '16px',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    } else {\n      renderGalleryItems(data, gallery, lightbox);\n      loadBtn.style.display = data.hits.length === perPage ? 'block' : 'none';\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.remove('submit-loader');\n    loader.style.display = 'none';\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  loader.classList.add('load-btn-loader');\n  loader.style.display = 'block';\n  loadBtn.style.display = 'none';\n  const query = searchInput.value.trim();\n  incrementPage();\n\n  try {\n    const data = await fetchImages(query);\n    renderGalleryItems(data, gallery, lightbox);\n    if (data.hits.length < perPage) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fafafb',\n        messageLineHeight: '1.5px',\n        messageSize: '16px',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n      loadBtn.style.display = 'none';\n      loader.style.display = 'none';\n      return;\n    }\n    loader.classList.remove('load-btn-loader');\n    loader.style.display = 'none';\n    loadBtn.style.display = 'block';\n\n    scrollByTwoCardHeights();\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","currentPage","perPage","fetchImages","query","searchParams","axios","error","incrementPage","resetPage","renderGalleryItems","data","gallery","lightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","element","image","infoList","link","title","value","item","heading","text","SimpleLightbox","scrollByTwoCardHeights","galleryItem","itemHeight","searchForm","searchInput","loader","loadBtn","event","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEjB,IAAIC,EAAc,EACX,MAAMC,EAAU,GAEhB,eAAeC,EAAYC,EAAO,CACvC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMH,EACN,SAAUC,CACd,CAAG,EAED,GAAI,CAEF,OADiB,MAAMI,EAAM,IAAIN,EAAU,CAAE,OAAQK,CAAY,CAAE,GACnD,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CAEO,SAASC,GAAgB,CAC9BP,GAAe,CACjB,CAEO,SAASQ,GAAY,CAC1BR,EAAc,CAChB,CC9BO,SAASS,EAAmBC,EAAMC,EAASC,EAAU,CAC1D,QAAQ,IAAIF,CAAI,EAChBA,EAAK,KAAK,QACR,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACN,IAAU,CACJ,MAAMC,EAAU,SAAS,cAAc,IAAI,EACrCC,EAAQ,SAAS,cAAc,KAAK,EACpCC,EAAW,SAAS,cAAc,IAAI,EACtCC,EAAO,SAAS,cAAc,GAAG,EAEvCH,EAAQ,UAAU,IAAI,cAAc,EACpCC,EAAM,UAAU,IAAI,eAAe,EACnCC,EAAS,UAAU,IAAI,WAAW,EAClCC,EAAK,UAAU,IAAI,cAAc,EAEjCF,EAAM,IAAMR,EACZQ,EAAM,MAAQ,MACdA,EAAM,IAAMN,EACZQ,EAAK,KAAOT,EAEM,CAChB,CAAE,MAAO,QAAS,MAAOE,CAAO,EAChC,CAAE,MAAO,QAAS,MAAOC,CAAO,EAChC,CAAE,MAAO,WAAY,MAAOC,CAAU,EACtC,CAAE,MAAO,YAAa,MAAOC,CAAW,CAChD,EACgB,QAAQ,CAAC,CAAE,MAAAK,EAAO,MAAAC,CAAK,IAAO,CACtC,MAAMC,EAAO,SAAS,cAAc,IAAI,EAClCC,EAAU,SAAS,cAAc,IAAI,EACrCC,EAAO,SAAS,cAAc,GAAG,EAEvCF,EAAK,UAAU,IAAI,WAAW,EAC9BC,EAAQ,UAAU,IAAI,YAAY,EAClCC,EAAK,UAAU,IAAI,WAAW,EAE9BD,EAAQ,YAAc,GAAGH,CAAK,GAC9BI,EAAK,YAAc,GAAGH,CAAK,GAE3BC,EAAK,YAAYC,CAAO,EACxBD,EAAK,YAAYE,CAAI,EACrBN,EAAS,YAAYI,CAAI,CACjC,CAAO,EAEDH,EAAK,YAAYF,CAAK,EACtBD,EAAQ,YAAYG,CAAI,EACxBH,EAAQ,YAAYE,CAAQ,EAC5BX,EAAQ,YAAYS,CAAO,CAC5B,CACL,EAEOR,EAQHA,EAAS,QAAO,EAPhBA,EAAW,IAAIiB,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,MAAO,GACP,KAAM,EACZ,CAAK,CAIL,CAEO,SAASC,GAAyB,CACvC,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CCnEA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDvB,EAAU,SAAS,cAAc,UAAU,EAC3CwB,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIxB,EAEJqB,EAAW,iBAAiB,SAAU,MAAMI,GAAS,CACnDA,EAAM,eAAc,EAEpB1B,EAAQ,UAAY,GACpBwB,EAAO,MAAM,QAAU,QACvBC,EAAQ,MAAM,QAAU,OACxBD,EAAO,UAAU,IAAI,eAAe,EAEpC,MAAMhC,EAAQ+B,EAAY,MAAM,KAAI,EAEpC1B,IAEA,GAAI,CACF,MAAME,EAAO,MAAMR,EAAYC,CAAK,EAEhCO,EAAK,KAAK,SAAW,EACvB4B,EAAS,KAAK,CACZ,QACE,gFACF,aAAc,UACd,kBAAmB,QACnB,YAAa,OACb,gBAAiB,UACjB,SAAU,UAClB,CAAO,GAED7B,EAAmBC,EAAMC,EAASC,CAAQ,EAC1CwB,EAAQ,MAAM,QAAU1B,EAAK,KAAK,SAAWT,EAAU,QAAU,OAEpE,OAAQK,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACR6B,EAAO,UAAU,OAAO,eAAe,EACvCA,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAEDC,EAAQ,iBAAiB,QAAS,SAAY,CAC5CD,EAAO,UAAU,IAAI,iBAAiB,EACtCA,EAAO,MAAM,QAAU,QACvBC,EAAQ,MAAM,QAAU,OACxB,MAAMjC,EAAQ+B,EAAY,MAAM,KAAI,EACpC3B,IAEA,GAAI,CACF,MAAMG,EAAO,MAAMR,EAAYC,CAAK,EAEpC,GADAM,EAAmBC,EAAMC,EAASC,CAAQ,EACtCF,EAAK,KAAK,OAAST,EAAS,CAC9BqC,EAAS,KAAK,CACZ,QAAS,6DACT,aAAc,UACd,kBAAmB,QACnB,YAAa,OACb,gBAAiB,UACjB,SAAU,UAClB,CAAO,EACDF,EAAQ,MAAM,QAAU,OACxBD,EAAO,MAAM,QAAU,OACvB,MACD,CACDA,EAAO,UAAU,OAAO,iBAAiB,EACzCA,EAAO,MAAM,QAAU,OACvBC,EAAQ,MAAM,QAAU,QAExBN,GACD,OAAQxB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC"}